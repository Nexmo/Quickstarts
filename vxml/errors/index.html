<!doctype html>
<html lang="en">
<head>
    <!-- Meta Information -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>Nexmo Quickstarts - VoiceXML: Catching Errors </title>

    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="/Quickstarts/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="/Quickstarts/css/nexmo.css">
    <link rel="stylesheet" type="text/css" href="/Quickstarts/css/font-awesome.min.css">
</head><body>
<header>
    <div class="container-fluid header-meta">
        <h1 class="hide">Nexmo</h1>
        <a href="https://nexmo.com"><img src="/Quickstarts/img/nexmo-logo--white.svg" alt="Nexmo" class="page-logo"></a>
		<div class="navbar navbar-default">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button>
            </div>
            <nav id="navbar-collapse" class="pull-right collapse navbar-collapse">
                <ul class="nav navbar-nav">
                    <li><a href="/Quickstarts/">Quickstarts</a></li>
                    <li><a href="https://nexmo.com">Nexmo.com</a></li>
                </ul>
            </nav>
        </div>
    </div>
    <div class="container-fluid">
        <div class="row text-center header-title">
            <div class="col-md-12">
                <h2 id='title'>  VoiceXML: Catching Errors </h2>
                <!-- <div class="lead">Like an HTML form, any data should be validated server side before it's used. However, just like HTML provides for 
useful client side validation, VoiceXML helps you avoid complex server side validation by providing ways to validate 
data before the form is submitted.</div> -->
            </div>
        </div>
    </div>
</header><!-- ********************************* Container ******************************************* -->
<section class="body-container">
  <div class="container">
    <div class="col-md-3 aside">
        <aside>
            <div class="side-menu-container">
                    <div class="side-menu SMS">
                        <h4>SMS</h4>
                        <ul class="list-unstyled">
                                <li ><a href="/Quickstarts/./sms/send/">Sending Your First SMS</a> <span>»</span></li>
                                <li ><a href="/Quickstarts/./sms/receive/">Receiving Your First SMS</a> <span>»</span></li>
                                <li ><a href="/Quickstarts/./sms/reply/">Replying to SMS Messages</a> <span>»</span></li>
                        </ul>
                    </div>
                    <div class="side-menu Voice">
                        <h4>Voice</h4>
                        <ul class="list-unstyled">
                                <li ><a href="/Quickstarts/./tts/">Delivering Messages with Voice</a> <span>»</span></li>
                                <li ><a href="/Quickstarts/./voice/inbound/">Receiving Your First Call</a> <span>»</span></li>
                                <li ><a href="/Quickstarts/./voice/outbound/">Making An Outbound Call</a> <span>»</span></li>
                        </ul>
                    </div>
                    <div class="side-menu VoiceXML">
                        <h4>VoiceXML</h4>
                        <ul class="list-unstyled">
                                <li ><a href="/Quickstarts/./vxml/input/">Prompting for Input</a> <span>»</span></li>
                                <li ><a href="/Quickstarts/./vxml/recording/">Recording Audio</a> <span>»</span></li>
                                <li ><a href="/Quickstarts/./vxml/transfer/">Transferring a Call</a> <span>»</span></li>
                                <li ><a href="/Quickstarts/./vxml/multi/">Multiple Items and Forms</a> <span>»</span></li>
                                <li class="current"><a href="/Quickstarts/./vxml/errors/">Error Events</a> <span>»</span></li>
                        </ul>
                    </div>
                    <div class="side-menu Verify &amp; Number Inisght">
                        <h4>Verify &amp; Number Inisght</h4>
                        <ul class="list-unstyled">
                                <li ><a href="/Quickstarts/./verify/verify/">Verifying a Phone Number</a> <span>»</span></li>
                                <li ><a href="/Quickstarts/./ni/ni/">Getting Number Information</a> <span>»</span></li>
                        </ul>
                    </div>
            </div>
        </aside>
    </div><!-- ********************************* Body ******************************************* -->
    <div class="col-md-9">
      <section class="body-content">
        <div class="row">
          <div class="col-md-12"><p>Like an HTML form, any data should be validated server side before it's used. However, just like HTML provides for
useful client side validation, VoiceXML helps you avoid complex server side validation by providing ways to validate
data before the form is submitted.</p>
<p>VoiceXML throws a few common form events which can be caught using a <code>&lt;catch&gt;</code> element. However, it can be much easier
to use the shorthand elements that directly match the event name.</p>
<p>The <code>&lt;noinput&gt;</code> element will catch a <code>noinput</code> event thrown when the caller doesn't provide any speech or DTMF input.
Similarly, <code>&lt;nomatch&gt;</code> catches the event thrown when the caller provides input that cannot be matched to any defined
grammar.</p>
<p>For <code>&lt;noinput&gt;</code> it may be appropriate to notify the user that nothing was heard, and use <code>&lt;reprompt&gt;</code> have the field's
prompt read again.</p>
<pre><code>&lt;noinput&gt;
    &lt;prompt&gt;To better assist you, we need to know what computer you're using.&lt;/prompt&gt;
    &lt;reprompt /&gt;
&lt;/noinput&gt;
</code></pre>
<p>When <code>&lt;nomatch&gt;</code> is caught, <code>&lt;reprompt&gt;</code> can be used with the <code>count</code> attribute of <code>&lt;prompt&gt;</code> to change the field's
prompt. When a field has multiple <code>&lt;prompt&gt;</code> elements with different <code>count</code> attributes, the highest count that is not
greater than the counter is used. The default value for <code>count</code> is 1.</p>
<pre><code>&lt;nomatch&gt;
    &lt;prompt&gt;I didn't recognize that OS.&lt;/prompt&gt;
    &lt;reprompt /&gt;
&lt;/nomatch&gt;
</code></pre>
<pre><code>&lt;prompt&gt;What operating system do you use?&lt;/prompt&gt;
&lt;prompt count=&quot;2&quot;&gt;Please say the name of the operating system you use.&lt;/prompt&gt;
&lt;prompt count=&quot;3&quot;&gt;Say windows, mac, or linux.&lt;/prompt&gt;
</code></pre>
<p>The matching event for <code>&lt;help&gt;</code> is thrown when user seems to be asking for help. A more detailed prompt may be useful
in that case.</p>
<pre><code>&lt;help&gt;
    &lt;prompt&gt;
        The operating system is the main interface of your computer. Its logo may be shown when you turn
        on your computer.
    &lt;/prompt&gt;
    &lt;reprompt /&gt;
&lt;/help&gt;
</code></pre>
<p>Finally, <code>&lt;error&gt;</code> can be used to catch any error event, and avoid an unexplained disconnection to the caller.</p>
<pre><code>&lt;error&gt;
    &lt;prompt&gt;Sorry, something unexpected happened. Please call again.&lt;/prompt&gt;
    &lt;exit /&gt;
&lt;/error&gt;
</code></pre>
<p>The <code>&lt;catch&gt;</code> element can be used for finer control over events and <code>&lt;throw&gt;</code> can be used to throw events. Find out more
about <a href="http://www.w3.org/TR/voicexml20/#dml5.2.2" class="external-link"><code>&lt;catch&gt;</code></a> <a href="http://www.w3.org/TR/voicexml20/#dml5.2.2" class="external-link"><code>&lt;throw&gt;</code></a> and how to <a href="http://www.w3.org/TR/voicexml20/#dml5.2" class="external-link">handle events</a> at the W3C's documentation.</p>
<p>This example also sets a few speech recognizer properties, <code>confidencelevel</code> and <code>universals</code>. <code>confidencelevel</code> sets
the needed confidence level needed for a successful match. <code>universals</code> enables recognition of common grammar, in this
case 'help' is recognized and results in an event.  The W3C's documentation has more about
<a href="http://www.w3.org/TR/voicexml20/#dml6.3.1" class="external-link">Platform Specific Properties</a></p>
<div class="code-snippets">
    <ul class="nav nav-tabs">
                <li role="presentation" class="Full VXML552c5544421a7 active"><a href="#Full VXML552c5544421a7" aria-controls="Full VXML552c5544421a7" role="tab" data-toggle="tab">Full VXML</a></li>
            </ul>
    <div class="tab-content">
                <div role="tabpanel" class="tab-pane active" id="Full VXML552c5544421a7">
            <pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;vxml version = &quot;2.1&quot;&gt;
    &lt;form&gt;
        &lt;property name=&quot;confidencelevel&quot; value=&quot;.7&quot;/&gt;
        &lt;property name=&quot;universals&quot; value=&quot;help&quot;/&gt;
        &lt;field name=&quot;os&quot;&gt;
            &lt;prompt&gt;What operating system do you use?&lt;/prompt&gt;
            &lt;prompt count=&quot;2&quot;&gt;Please say the name of the operating system you use.&lt;/prompt&gt;
            &lt;prompt count=&quot;3&quot;&gt;Say windows, mac, or linux.&lt;/prompt&gt;
            &lt;grammar xml:lang=&quot;en-US&quot; root = &quot;TOPLEVEL&quot; mode=&quot;voice&quot; &gt;
                &lt;rule id=&quot;TOPLEVEL&quot; scope=&quot;public&quot;&gt;
                    &lt;one-of&gt;
                        &lt;item&gt; windows &lt;/item&gt;
                        &lt;item&gt; mac &lt;/item&gt;
                        &lt;item&gt; linux &lt;/item&gt;
                        &lt;item&gt; amiga &lt;/item&gt;
                    &lt;/one-of&gt;
                &lt;/rule&gt;
            &lt;/grammar&gt;
            &lt;noinput&gt;
                &lt;prompt&gt;To better assist you, we need to know what computer you're using.&lt;/prompt&gt;
                &lt;reprompt /&gt;
            &lt;/noinput&gt;
            &lt;noinput count=&quot;2&quot;&gt;
                &lt;prompt&gt;I didn't hear anything, perhaps there is an issue with the connection, or your phone is muted.&lt;/prompt&gt;
                &lt;reprompt /&gt;
            &lt;/noinput&gt;
            &lt;nomatch&gt;
                &lt;prompt&gt;I didn't recognize that OS.&lt;/prompt&gt;
                &lt;reprompt /&gt;
            &lt;/nomatch&gt;
            &lt;help&gt;
                &lt;prompt&gt;
                    The operating system is the main interface of your computer. Its logo may be shown when you turn
                    on your computer.
                &lt;/prompt&gt;
                &lt;reprompt /&gt;
            &lt;/help&gt;
            &lt;error&gt;
                &lt;prompt&gt;Sorry, something unexpected happened. Please call again.&lt;/prompt&gt;
                &lt;exit /&gt;
            &lt;/error&gt;
        &lt;/field&gt;
        &lt;filled&gt;
            &lt;prompt&gt;Thank you, we'll get you &lt;value expr=&quot;os&quot;/&gt; specific help.&lt;/prompt&gt;
            &lt;submit next=&quot;./../php/form.php&quot; method=&quot;post&quot;/&gt;
        &lt;/filled&gt;
    &lt;/form&gt;
&lt;/vxml&gt;</code></pre>
        </div>
            </div>
</div>
<p>Once the form is submitted, validation server side can ensure the data is as expected without needing additional logic
to drive user interaction.</p>
<div class="code-snippets">
    <ul class="nav nav-tabs">
                <li role="presentation" class="PHP552c55444242e active"><a href="#PHP552c55444242e" aria-controls="PHP552c55444242e" role="tab" data-toggle="tab">PHP</a></li>
            </ul>
    <div class="tab-content">
                <div role="tabpanel" class="tab-pane active" id="PHP552c55444242e">
            <pre><code>&lt;?php
if(!isset($_POST['os'])){
    error_log('no os set');
    return;
}

switch($_POST['os']){
    //valid selections
    case 'windows':
        $support = 'Call back after you reboot.';
        break;
    case 'mac':
        $support = 'Please just go to the genius bar.';
        break;
    case 'linux':
        $support = 'Recompile your kernel.';
        break;
    case 'amiga':
        $support = 'Hangup and dial our BBS for support.';
        break;
    //if our VXML is as expected, this should never happen
    default:
        include '../vxml/form.vxml';
        return;
}

echo '&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;';
?&gt;
&lt;vxml version=&quot;2.1&quot;&gt;
    &lt;form&gt;
        &lt;block&gt;
            &lt;prompt&gt;&lt;?php echo $support ?&gt;&lt;/prompt&gt;
        &lt;/block&gt;
    &lt;/form&gt;
&lt;/vxml&gt;</code></pre>
        </div>
            </div>
</div>
<p>Ready for more? Check out the W3C's documentation of <a href="http://www.w3.org/TR/voicexml20/#dml5.2" class="external-link">VoiceXML events</a>.</p>
</div>
        </div>
      </section>
    </div>
<!-- ********************************* End Body ******************************************* -->
  </div>
</section>
<!-- ********************************* End Container ******************************************* -->

<footer>
  <div class="container-fluid pre-footer">
    <div class="row">
      <div class="col-md-12">
<div class="cta cta--flex-center">
			<div class="cta__eq cta__primary">
				<span class="block">Start using Nexmo today</span>
			</div>
			<div class="cta__eq cta__secondary">
			<a href="https://dashboard.nexmo.com/register" class="btn">Try it for free</a>
			</div>
		</div>
</div>
    </div>
  </div>
  <div class="container">
    <div class="col-md-4">
      <ul  class="nav copyright">
        <li><img src="/Quickstarts/img/footer-logo.svg" alt="nexmo" class="footer-logo"></li>
        <li>© 2015 Nexmo Inc.</li>
        <li>
          <ul class="footer-social">
            <li> <a href="https://twitter.com/nexmo" class="social-icon--twitter" target="_blank"> <span class="hide">Twitter</span> </a> </li>
            <li> <a href="https://www.facebook.com/Nexmo" class="social-icon--facebook" target="_blank"> <span class="hide">Facebook</span> </a> </li>
            <li> <a href="https://www.linkedin.com/company/nexmo" class="social-icon--linkedin" target="_blank"> <span class="hide">Linkedin</span> </a> </li>
          </ul>
        </li>
      </ul>
    </div>
    <div class="col-md-2">
      <ul class="nav">
        <li> Resources </li>
        <li> <a hreflang="en" href="https://www.nexmo.com/blog">Blog</a> </li>
        <li> <a hreflang="en" href="https://www.nexmo.com/webinars">Webinars</a> </li>
        <li> <a hreflang="en" href="https://labs.nexmo.com/">Labs</a> </li>
      </ul>
    </div>
    <div class="col-md-2">
      <ul class="nav">
        <li> Customers </li>
        <li> <a hreflang="en" href="https://www.nexmo.com/customers/#case-studies">Case Studies</a> </li>
        <li> <a hreflang="en" href="https://www.nexmo.com/customers/#trust-nexmo">Trust Nexmo</a> </li>
      </ul>
    </div>
    <div class="col-md-2">
      <ul class="nav">
        <li> Company </li>
        <li> <a hreflang="en" href="https://www.nexmo.com/company/us/">About</a> </li>
        <li> <a hreflang="en" href="https://www.nexmo.com/company/leadership/">Leadership</a> </li>
        <li> <a hreflang="en" href="https://www.nexmo.com/company/press">Press</a> </li>
        <li> <a hreflang="en" href="https://www.nexmo.com/company/events">Events</a> </li>
        <li> <a hreflang="en" href="https://www.nexmo.com/company/careers">Careers</a> </li>
        <li> <a hreflang="en" href="https://www.nexmo.com/contact-us">Contact us</a> </li>
      </ul>
    </div>
    <div class="col-md-2">
      <ul class="nav">
        <li> &nbsp; </li>
        <li> <a hreflang="en" href="https://www.nexmo.com/terms-use">Terms of use</a> </li>
        <li> <a hreflang="en" href="https://www.nexmo.com/privacy-policy">Privacy policy</a> </li>
      </ul>
    </div>
  </div>
  </div>
</footer><!-- JS -->
<script src="/Quickstarts/js/jquery-1.11.2.min.js"></script>
<script src="/Quickstarts/js/bootstrap.min.js"></script>
<script src="/Quickstarts/js/nexmo.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script>
<script src="//f.vimeocdn.com/js/froogaloop2.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script>
    var environment = 'production';
    var track = (environment == 'production');

    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-20475086-4', 'auto');
    if(track){
        ga('send', 'pageview');
    } else {
        console.log('skipped sending pageview');
    }

    var trackOutboundLink = function(url) {
        if(track){
            ga('send', 'event', 'outbound', 'click', url, {'hitCallback':
                    function () {
                        document.location = url;
                    }
            });
        } else {
            console.log('skipped sending outbound link: ' + url);
            document.location = url;
        }
    }

    var getVimeoCallback = function(event){
        var sent = false;
        return function(id){
            if(!sent){
                var player = $f(id);
                sent = true;
                player.api('getVideoUrl', function(url){
                    if(track){
                        ga('send', 'event', 'video', event, url);
                    } else {
                        console.log('skipped sending video event: ' + event + ' ' + url);
                    }
                });
            }
        }
    };

    $(function(){
        $('a.external-link').click(function(){
            trackOutboundLink($(this).attr('href'));
            return false;
        });

        var frame = $("#screencast")[0];
        if(frame){
            $f(frame).addEvent('ready', function(id){
                var player = $f(id);
                player.addEvent('play', getVimeoCallback('play'));
                player.addEvent('finish', getVimeoCallback('finish'));
            });
        }
    });

</script>
<!--[if lt IE 9]>
  <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
</body>
</html>
