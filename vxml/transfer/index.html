<!doctype html>
<html lang="en">
<head>
    <!-- Meta Information -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>Nexmo Quickstarts - VoiceXML: Transferring a Call </title>

    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="/Quickstarts/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="/Quickstarts/css/nexmo.css">
    <link rel="stylesheet" type="text/css" href="/Quickstarts/css/font-awesome.min.css">
</head><body>
<header>
    <div class="container-fluid header-meta">
        <h1 class="hide">Nexmo</h1>
        <a href="https://nexmo.com"><img src="/Quickstarts/img/nexmo-logo--white.svg" alt="Nexmo" class="page-logo"></a>
		<div class="navbar navbar-default">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button>
            </div>
            <nav id="navbar-collapse" class="pull-right collapse navbar-collapse">
                <ul class="nav navbar-nav">
                    <li><a href="/Quickstarts/">Quickstarts</a></li>
                    <li><a href="https://nexmo.com">Nexmo.com</a></li>
                </ul>
            </nav>
        </div>
    </div>
    <div class="container-fluid">
        <div class="row text-center header-title">
            <div class="col-md-12">
                <h2 id='title'>  VoiceXML: Transferring a Call </h2>
                <!-- <div class="lead">Along with prompting a caller for information, VoiceXML also allows you transfer a ongoing call to an different number 
or SIP address. And like [`&lt;field&gt;`][field] and [`&lt;record&gt;`][record] the `&lt;transfer&gt;` element behaves like other 
`&lt;form&gt;` elements, the name of the element holding the end result of the transfer. That result could be `noanswer`, 
`busy`, or a [few other outcomes][results].</div> -->
            </div>
        </div>
    </div>
</header><!-- ********************************* Container ******************************************* -->
<section class="body-container">
  <div class="container">
    <div class="col-md-3 aside">
        <aside>
            <div class="side-menu-container">
                    <div class="side-menu SMS">
                        <h4>SMS</h4>
                        <ul class="list-unstyled">
                                <li ><a href="/Quickstarts/./sms/send/">Sending Your First SMS</a> <span>»</span></li>
                                <li ><a href="/Quickstarts/./sms/receive/">Receiving Your First SMS</a> <span>»</span></li>
                                <li ><a href="/Quickstarts/./sms/reply/">Replying to SMS Messages</a> <span>»</span></li>
                        </ul>
                    </div>
                    <div class="side-menu Voice">
                        <h4>Voice</h4>
                        <ul class="list-unstyled">
                                <li ><a href="/Quickstarts/./tts/">Delivering Messages with Voice</a> <span>»</span></li>
                                <li ><a href="/Quickstarts/./voice/inbound/">Receiving Your First Call</a> <span>»</span></li>
                                <li ><a href="/Quickstarts/./voice/outbound/">Making An Outbound Call</a> <span>»</span></li>
                        </ul>
                    </div>
                    <div class="side-menu VoiceXML">
                        <h4>VoiceXML</h4>
                        <ul class="list-unstyled">
                                <li ><a href="/Quickstarts/./vxml/input/">Prompting for Input</a> <span>»</span></li>
                                <li ><a href="/Quickstarts/./vxml/recording/">Recording Audio</a> <span>»</span></li>
                                <li class="current"><a href="/Quickstarts/./vxml/transfer/">Transferring a Call</a> <span>»</span></li>
                                <li ><a href="/Quickstarts/./vxml/multi/">Multiple Items and Forms</a> <span>»</span></li>
                                <li ><a href="/Quickstarts/./vxml/errors/">Error Events</a> <span>»</span></li>
                        </ul>
                    </div>
                    <div class="side-menu Verify &amp; Number Inisght">
                        <h4>Verify &amp; Number Inisght</h4>
                        <ul class="list-unstyled">
                                <li ><a href="/Quickstarts/./verify/verify/">Verifying a Phone Number</a> <span>»</span></li>
                                <li ><a href="/Quickstarts/./ni/ni/">Getting Number Information</a> <span>»</span></li>
                        </ul>
                    </div>
            </div>
        </aside>
    </div><!-- ********************************* Body ******************************************* -->
    <div class="col-md-9">
      <section class="body-content">
        <div class="row">
          <div class="col-md-12"><p>Along with prompting a caller for information, VoiceXML also allows you transfer a ongoing call to an different number
or SIP address. And like <a href="../input"><code>&lt;field&gt;</code></a> and <a href="../record"><code>&lt;record&gt;</code></a> the <code>&lt;transfer&gt;</code> element behaves like other
<code>&lt;form&gt;</code> elements, the name of the element holding the end result of the transfer. That result could be <code>noanswer</code>,
<code>busy</code>, or a <a href="http://www.w3.org/TR/voicexml20/#dml2.3.7.2" class="external-link">few other outcomes</a>.</p>
<p>The destination is the <code>dest</code> attribute of the transfer element, prefixed with either <code>sip:</code> or <code>tel:</code> depending on the
destination type. You'll also need to set the <code>bridge</code> attribute to true. This allows the VoiceXML document to result
after the transfer ends, as well as allow grammar to be active during the call.</p>
<p>You can set the timeout for the transfer - the time given the other party to answer - using <code>connecttimeout</code>, and
<code>maxtime</code> can be used to set how long the two calls can connected.</p>
<p>Like other <code>&lt;form&gt;</code> elements, <code>&lt;prompt&gt;</code> can be nested to notify the user of the transfer, and <code>&lt;grammar&gt;</code> can be used
to allow the transfer to be ended with a DTMF or a spoken command.</p>
<pre><code>&lt;transfer name=&quot;result&quot; dest=&quot;tel:+14158058810&quot; bridge=&quot;true&quot;&gt;
    &lt;prompt&gt;Please wait while we transfer you.&lt;/prompt&gt;
    &lt;grammar xml:lang=&quot;en-US&quot; root = &quot;TOPLEVEL&quot; mode=&quot;voice&quot;&gt;
        &lt;rule id=&quot;TOPLEVEL&quot; scope=&quot;public&quot;&gt;
            &lt;one-of&gt;
                &lt;item&gt; disconnect &lt;/item&gt;
            &lt;/one-of&gt;
        &lt;/rule&gt;
    &lt;/grammar&gt;
&lt;/transfer&gt;
</code></pre>
<p>Once the transfer is complete, we can use the result value to drive some logic, and let the caller know what happened
(assuming they didn't end the transfer by hanging up). When nested in a <code>&lt;form&gt;</code>, the <code>&lt;filled&gt;</code> element is executed
once all the child items have a value. Adding a set of <code>&lt;if&gt;</code>, <code>&lt;elseif&gt;</code>, and <code>&lt;else&gt;</code> elements allows us to change
the flow based on the transfer's value.</p>
<pre><code>       &lt;filled&gt;
           &lt;if cond=&quot;result == 'busy'&quot;&gt;
               &lt;prompt&gt;Sorry, they're busy.&lt;/prompt&gt;
           &lt;elseif cond=&quot;result == 'noanswer'&quot; /&gt;
               &lt;prompt&gt;Sorry, they didn't answer.&lt;/prompt&gt;
           &lt;else /&gt;
               &lt;prompt&gt;You spoke for &lt;value expr=&quot;result$.duration&quot; /&gt; seconds.&lt;/prompt&gt;
           &lt;/if&gt;
           &lt;if cond=&quot;result$.inputmode == 'voice'&quot;&gt;
               You ended the call by saying, &lt;value expr=&quot;result$.utterance&quot; /&gt;.
           &lt;/if&gt;
       &lt;/filled&gt;
</code></pre>
<p>Along with the outcome of the transfer, there are a few 'shadow variables' providing things like call duration, and how
the call was ended. The shadow variable are accessed by appending <code>$</code> to the element's name, then using dot notation to
reference the specific variable. Instead of using prompts to notify the user of the transfer status, <code>&lt;submit&gt;</code> could
be used to send that data to a server for logging.</p>
<div class="code-snippets">
    <ul class="nav nav-tabs">
                <li role="presentation" class="Full VXML552c5543c4a3a active"><a href="#Full VXML552c5543c4a3a" aria-controls="Full VXML552c5543c4a3a" role="tab" data-toggle="tab">Full VXML</a></li>
            </ul>
    <div class="tab-content">
                <div role="tabpanel" class="tab-pane active" id="Full VXML552c5543c4a3a">
            <pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;vxml version = &quot;2.1&quot;&gt;
    &lt;form&gt;
        &lt;transfer name=&quot;result&quot; dest=&quot;tel:+14158058810&quot; bridge=&quot;true&quot;&gt;
            &lt;prompt&gt;Please wait while we transfer you.&lt;/prompt&gt;
            &lt;grammar xml:lang=&quot;en-US&quot; root = &quot;TOPLEVEL&quot; mode=&quot;voice&quot;&gt;
                &lt;rule id=&quot;TOPLEVEL&quot; scope=&quot;public&quot;&gt;
                    &lt;one-of&gt;
                        &lt;item&gt; disconnect &lt;/item&gt;
                    &lt;/one-of&gt;
                &lt;/rule&gt;
            &lt;/grammar&gt;
        &lt;/transfer&gt;
        &lt;filled&gt;
            &lt;if cond=&quot;result == 'busy'&quot;&gt;
                &lt;prompt&gt;Sorry, they're busy.&lt;/prompt&gt;
            &lt;elseif cond=&quot;result == 'noanswer'&quot; /&gt;
                &lt;prompt&gt;Sorry, they didn't answer.&lt;/prompt&gt;
            &lt;else /&gt;
                &lt;prompt&gt;You spoke for &lt;value expr=&quot;result$.duration&quot; /&gt; seconds.&lt;/prompt&gt;
            &lt;/if&gt;

            &lt;if cond=&quot;result$.inputmode == 'voice'&quot;&gt;
                You ended the call by saying, &lt;value expr=&quot;result$.utterance&quot; /&gt;.
            &lt;/if&gt;
        &lt;/filled&gt;
        &lt;block&gt;
            Thanks for using the transfer element.
        &lt;/block&gt;
    &lt;/form&gt;
&lt;/vxml&gt;</code></pre>
        </div>
            </div>
</div>
<p>Want to dig a little deeper into VoiceXML? Check out the W3C's documentation of <a href="http://www.w3.org/TR/voicexml20/#dml2.3.7" class="external-link"><code>&lt;transfer&gt;</code></a>,
<a href="http://www.w3.org/TR/voicexml20/#dml2.4" class="external-link"><code>&lt;filled&gt;</code></a>, <a href="http://www.w3.org/TR/voicexml20/#dml5.3.4" class="external-link"><code>&lt;if&gt;</code></a>, and <a href="http://www.w3.org/TR/voicexml20/#dml2.3" class="external-link">shadow variables</a>.</p>
</div>
        </div>
        <div class="row next">
          <div class="col-md-12">
            <a href="/Quickstarts/./vxml/multi/" class="btn"><span>Next</span>: Multiple Items and Forms <span class="glyphicon glyphicon-play"></span></a>
          </div>
        </div>
      </section>
    </div>
<!-- ********************************* End Body ******************************************* -->
  </div>
</section>
<!-- ********************************* End Container ******************************************* -->

<footer>
  <div class="container-fluid pre-footer">
    <div class="row">
      <div class="col-md-12">
<div class="cta cta--flex-center">
			<div class="cta__eq cta__primary">
				<span class="block">Start using Nexmo today</span>
			</div>
			<div class="cta__eq cta__secondary">
			<a href="https://dashboard.nexmo.com/register" class="btn">Try it for free</a>
			</div>
		</div>
</div>
    </div>
  </div>
  <div class="container">
    <div class="col-md-4">
      <ul  class="nav copyright">
        <li><img src="/Quickstarts/img/footer-logo.svg" alt="nexmo" class="footer-logo"></li>
        <li>© 2015 Nexmo Inc.</li>
        <li>
          <ul class="footer-social">
            <li> <a href="https://twitter.com/nexmo" class="social-icon--twitter" target="_blank"> <span class="hide">Twitter</span> </a> </li>
            <li> <a href="https://www.facebook.com/Nexmo" class="social-icon--facebook" target="_blank"> <span class="hide">Facebook</span> </a> </li>
            <li> <a href="https://www.linkedin.com/company/nexmo" class="social-icon--linkedin" target="_blank"> <span class="hide">Linkedin</span> </a> </li>
          </ul>
        </li>
      </ul>
    </div>
    <div class="col-md-2">
      <ul class="nav">
        <li> Resources </li>
        <li> <a hreflang="en" href="https://www.nexmo.com/blog">Blog</a> </li>
        <li> <a hreflang="en" href="https://www.nexmo.com/webinars">Webinars</a> </li>
        <li> <a hreflang="en" href="https://labs.nexmo.com/">Labs</a> </li>
      </ul>
    </div>
    <div class="col-md-2">
      <ul class="nav">
        <li> Customers </li>
        <li> <a hreflang="en" href="https://www.nexmo.com/customers/#case-studies">Case Studies</a> </li>
        <li> <a hreflang="en" href="https://www.nexmo.com/customers/#trust-nexmo">Trust Nexmo</a> </li>
      </ul>
    </div>
    <div class="col-md-2">
      <ul class="nav">
        <li> Company </li>
        <li> <a hreflang="en" href="https://www.nexmo.com/company/us/">About</a> </li>
        <li> <a hreflang="en" href="https://www.nexmo.com/company/leadership/">Leadership</a> </li>
        <li> <a hreflang="en" href="https://www.nexmo.com/company/press">Press</a> </li>
        <li> <a hreflang="en" href="https://www.nexmo.com/company/events">Events</a> </li>
        <li> <a hreflang="en" href="https://www.nexmo.com/company/careers">Careers</a> </li>
        <li> <a hreflang="en" href="https://www.nexmo.com/contact-us">Contact us</a> </li>
      </ul>
    </div>
    <div class="col-md-2">
      <ul class="nav">
        <li> &nbsp; </li>
        <li> <a hreflang="en" href="https://www.nexmo.com/terms-use">Terms of use</a> </li>
        <li> <a hreflang="en" href="https://www.nexmo.com/privacy-policy">Privacy policy</a> </li>
      </ul>
    </div>
  </div>
  </div>
</footer><!-- JS -->
<script src="/Quickstarts/js/jquery-1.11.2.min.js"></script>
<script src="/Quickstarts/js/bootstrap.min.js"></script>
<script src="/Quickstarts/js/nexmo.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script>
<script src="//f.vimeocdn.com/js/froogaloop2.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script>
    var environment = 'production';
    var track = (environment == 'production');

    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-20475086-4', 'auto');
    if(track){
        ga('send', 'pageview');
    } else {
        console.log('skipped sending pageview');
    }

    var trackOutboundLink = function(url) {
        if(track){
            ga('send', 'event', 'outbound', 'click', url, {'hitCallback':
                    function () {
                        document.location = url;
                    }
            });
        } else {
            console.log('skipped sending outbound link: ' + url);
            document.location = url;
        }
    }

    var getVimeoCallback = function(event){
        var sent = false;
        return function(id){
            if(!sent){
                var player = $f(id);
                sent = true;
                player.api('getVideoUrl', function(url){
                    if(track){
                        ga('send', 'event', 'video', event, url);
                    } else {
                        console.log('skipped sending video event: ' + event + ' ' + url);
                    }
                });
            }
        }
    };

    $(function(){
        $('a.external-link').click(function(){
            trackOutboundLink($(this).attr('href'));
            return false;
        });

        var frame = $("#screencast")[0];
        if(frame){
            $f(frame).addEvent('ready', function(id){
                var player = $f(id);
                player.addEvent('play', getVimeoCallback('play'));
                player.addEvent('finish', getVimeoCallback('finish'));
            });
        }
    });

</script>
<!--[if lt IE 9]>
  <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
</body>
</html>
