<!doctype html>
<html lang="en">
<head>
<!-- Meta Information -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<title>Sending Your First SMS</title>

<!-- CSS -->
<link rel="stylesheet" type="text/css" href="/Quickstarts/css/bootstrap.min.css">
<link rel="stylesheet" id="lato-css" href="//fonts.googleapis.com/css?family=Lato%3A100%2C300%2C400%2C700%2C900%2C100italic%2C300italic%2C400italic%2C700italic%2C900italic&amp;ver=4.1" type="text/css" media="all">
<link rel="stylesheet" type="text/css" href="/Quickstarts/css/nexmo.css">
<link rel="stylesheet" type="text/css" href="/Quickstarts/css/font-awesome.min.css">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/default.min.css">
</head>

<body>
<!-- ********************************* Header ******************************************* -->
<header>
  <div class="container-fluid header-meta">
    <h1 class="hide">Nexmo</h1>
    <a href="index.html"><img src="/Quickstarts/img/logo.png" alt="Nexmo.com" width="168" height="31" class="logo"></a>
    <div class="navbar navbar-default">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button>
      </div>
      <nav id="navbar-collapse" class="pull-right collapse navbar-collapse">
        <ul class="nav navbar-nav">
          <li><a href="/Quickstarts/">Quickstarts</a></li>
          <li><a href="https://nexmo.com">Nexmo.com</a></li>
        </ul>
      </nav>
    </div>
  </div>
  <div class="container-fluid">
    <div class="row text-center header-title">
      <div class="col-md-12">
        <h2 id='title'>Quickstart: Recording Audio</h2>
        <!-- <div class="lead">The purpose of VoiceXML is to present the caller - or user - with information, and prompt the user for a response. 
Sometimes this is [recognized speech or DTMF digits][input], but it could also be recorded audio. </div> -->
      </div>
    </div>
  </div>
</header>
<!-- ********************************* End Header ******************************************* -->

<!-- ********************************* Container ******************************************* -->
<section class="body-container">
  <div class="container">
<!-- ********************************* Aside ******************************************* -->
    <div class="col-md-3 aside">
      <aside>
        <div class="side-menu-container">
          <div class="side-menu SMS">
            <h4>SMS</h4>
            <ul class="list-unstyled">
              <li ><a href="/Quickstarts/./sms/send/">Sending Your First SMS</a> <span>»</span></li>
              <li ><a href="/Quickstarts/./sms/receive/">Receiving Your First SMS</a> <span>»</span></li>
              <li ><a href="/Quickstarts/./sms/reply/">Replying to SMS Messages</a> <span>»</span></li>
            </ul>
          </div>
          <div class="side-menu Voice">
            <h4>Voice</h4>
            <ul class="list-unstyled">
              <li ><a href="/Quickstarts/./tts/">Delivering Messages with Voice</a> <span>»</span></li>
              <li ><a href="/Quickstarts/./voice/inbound/">Receiving Your First Call</a> <span>»</span></li>
              <li ><a href="/Quickstarts/./voice/outbound/">Making An Outbound Call</a> <span>»</span></li>
            </ul>
          </div>
          <div class="side-menu VXML">
            <h4>VXML</h4>
            <ul class="list-unstyled">
              <li ><a href="/Quickstarts/./vxml/input/">Prompting for Input</a> <span>»</span></li>
              <li class="current"><a href="/Quickstarts/./vxml/recording/">Recording Audio</a> <span>»</span></li>
              <li ><a href="/Quickstarts/./vxml/transfer/">Transferring a Call</a> <span>»</span></li>
              <li ><a href="/Quickstarts/./vxml/multi/">Multiple Items and Forms</a> <span>»</span></li>
              <li ><a href="/Quickstarts/./vxml/errors/">Error Events</a> <span>»</span></li>
            </ul>
          </div>
        </div>
      </aside>
    </div>
<!-- ********************************* End Aside ******************************************* -->

<!-- ********************************* Body ******************************************* -->
    <div class="col-md-9">
      <section class="body-content">
        <div class="row">
          <div class="col-md-12"><p>The purpose of VoiceXML is to present the caller - or user - with information, and prompt the user for a response.
Sometimes this is <a href="../input">recognized speech or DTMF digits</a>, but it could also be recorded audio.</p>
<p>Like most VoiceXML documents, it starts with a <code>&lt;form&gt;</code>. To keep things simple, we'll place a <code>&lt;submit&gt;</code> element
inside of a <code>&lt;block&gt;</code> at the end of the form so it is executed automatically, and the data sent to the <code>next</code> URL.</p>
<p>Since we'll be sending an audio file, we'll set the <code>enctype</code> to <code>multipart/form-data</code> so our server side code can
handle it just like a file upload from an HTML form.</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;vxml version = &quot;2.1&quot;&gt;
    &lt;form&gt;
        &lt;block&gt;
            &lt;submit next=&quot;../php/form.php&quot; enctype=&quot;multipart/form-data&quot; method=&quot;post&quot;/&gt;
        &lt;/block&gt;
    &lt;/form&gt;
&lt;/vxml&gt;
</code></pre>
<pre><code>&lt;block&gt;
    &lt;submit next=&quot;./../form.php&quot; enctype=&quot;multipart/form-data&quot; method=&quot;post&quot;/&gt;
&lt;/block&gt;
</code></pre>
<p>Instead of <code>&lt;field&gt;</code> we'll use <code>&lt;record&gt;</code> to capture a recording. Like <code>&lt;field&gt;</code> the <code>name</code> attribute defines how the
recording is referenced in the VoiceXML document, and what name is used when the data is submitted to a URL. Other
attributes like <code>beep</code> and <code>maxtime</code> allow you to control the recording process. For more information, talk a look at
the <a href="http://www.w3.org/TR/voicexml20/#dml2.3.6" class="external-link">W3C documentation on the <code>&lt;record&gt;</code> element</a>.</p>
<p>We can nest a <code>&lt;prompt&gt;</code> inside to tell the caller what we want them to record:</p>
<pre><code>&lt;record name=&quot;message&quot; beep=&quot;true&quot; maxtime=&quot;60s&quot;&gt;
    &lt;prompt&gt;Please leave your message after the beep, then press any key.&lt;/prompt&gt;
&lt;/record&gt;        
</code></pre>
<pre><code>&lt;record name=&quot;message&quot; beep=&quot;true&quot; maxtime=&quot;60s&quot;&gt;
    &lt;prompt&gt;Please leave your message after the beep, then press any key.&lt;/prompt&gt;
&lt;/record&gt;
</code></pre>
<p>At this point, the caller would be prompted to record some audio, and that recording would be submitted to the URL.
However, we can also use the recording in the VoiceXML document itself, so let's play it back to the caller using
another <code>&lt;prompt&gt;</code> along with the the <code>&lt;value&gt;</code> element. The expression for <code>&lt;value&gt;</code> will be the name of the recording.</p>
<pre><code>&lt;block&gt;
    &lt;prompt&gt;Here's what you recorded &lt;value expr=&quot;message&quot;/&gt;.&lt;/prompt&gt;
&lt;/block&gt;
</code></pre>
<pre><code>&lt;block&gt;
    &lt;prompt&gt;Here's what you recorded &lt;value expr=&quot;message&quot;/&gt;.&lt;/prompt&gt;
&lt;/block&gt;
</code></pre>
<p>Now our simple VoiceXML document prompts the caller to record a message, and plays it back to them.</p>
<div class="code-snippets">
    <ul class="nav nav-tabs">
                <li role="presentation" class="Full VXML54c0164ed15c6 active"><a href="#Full VXML54c0164ed15c6" aria-controls="Full VXML54c0164ed15c6" role="tab" data-toggle="tab">Full VXML</a></li>
            </ul>
    <div class="tab-content">
                <div role="tabpanel" class="tab-pane active" id="Full VXML54c0164ed15c6">
            <pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;vxml version = &quot;2.1&quot;&gt;
    &lt;form&gt;
        &lt;record name=&quot;message&quot; beep=&quot;true&quot; maxtime=&quot;60s&quot;&gt;
            &lt;prompt&gt;Please leave your message after the beep, then press any key.&lt;/prompt&gt;
        &lt;/record&gt;
        &lt;block&gt;
            &lt;prompt&gt;Here's what you recorded &lt;value expr=&quot;message&quot;/&gt;.&lt;/prompt&gt;
        &lt;/block&gt;
        &lt;block&gt;
            &lt;submit next=&quot;./../form.php&quot; enctype=&quot;multipart/form-data&quot; method=&quot;post&quot;/&gt;
        &lt;/block&gt;
    &lt;/form&gt;
&lt;/vxml&gt;</code></pre>
        </div>
            </div>
</div>
<p>Once the caller has provided a value for <code>&lt;record&gt;</code>, the <code>&lt;block&gt;</code> element at the enc of the form is  executed, and the
recording is sent to the defined URL. If VoiceXML is returned by that URL, the call continues. Here's a simple server
side script to save the recording.</p>
<div class="code-snippets">
    <ul class="nav nav-tabs">
                <li role="presentation" class="PHP54c0164ed19ec active"><a href="#PHP54c0164ed19ec" aria-controls="PHP54c0164ed19ec" role="tab" data-toggle="tab">PHP</a></li>
            </ul>
    <div class="tab-content">
                <div role="tabpanel" class="tab-pane active" id="PHP54c0164ed19ec">
            <pre><code>&lt;?php
if(!isset($_FILES['message'])){
    return; //not a post from our script
}

switch($_FILES['message']['error']){
    case UPLOAD_ERR_OK:
        move_uploaded_file($_FILES['message']['tmp_name'], './recordings/' . $_FILES['message']['name']);
        $prompt = 'Thanks, your message has been saved.';
        break;
    default:
        $prompt = 'Sorry, we could not save your message.';
}
echo '&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;';
?&gt;
&lt;vxml version=&quot;2.1&quot;&gt;
    &lt;form&gt;
        &lt;block&gt;
            &lt;prompt&gt;&lt;?php echo $prompt ?&gt;&lt;/prompt&gt;
        &lt;/block&gt;
    &lt;/form&gt;
&lt;/vxml&gt;</code></pre>
        </div>
            </div>
</div>
<p>Want to dig a little deeper into VoiceXML? Check out the W3C's documentation of <a href="http://www.w3.org/TR/voicexml20/#dml2.1" class="external-link"><code>&lt;form&gt;</code></a>, <a href="http://www.w3.org/TR/voicexml20/#dml2.3.6" class="external-link"><code>&lt;record&gt;</code></a>,
and <a href="http://www.w3.org/TR/voicexml20/#dml4.1.4" class="external-link"><code>&lt;value&gt;</code></a>.</p>
</div>
        </div>
        <div class="row next">
          <div class="col-md-12">
            <a href="/Quickstarts/./vxml/transfer/" class="btn"><span>Next</span>: Transferring a Call <span class="glyphicon glyphicon-play"></span></a>
          </div>
        </div>
      </section>
    </div>
<!-- ********************************* End Body ******************************************* -->
  </div>
</section>
<!-- ********************************* End Container ******************************************* -->

<!-- ********************************* Footer ******************************************* -->
<footer>
  <div class="container">
    <div class="row footer-quick-menu">
      <div class="col-md-4 text-center"> <a href="https://www.nexmo.com/blog">Resources</a> </div>
      <div class="col-md-4 text-center"> <a href="https://www.nexmo.com/customers/">Customers</a> </div>
      <div class="col-md-4 text-center"> <a href="https://www.nexmo.com/company/us/">Company</a>
        </ul>
      </div>
    </div>
  </div>
  <div class="container-fluid footer-menu">
    <div class="row">
      <div class="col-md-4">
        <ul class="nav">
          <li><a href="https://www.nexmo.com/blog">Blog</a></li>
          <li><a href="https://www.nexmo.com/resources/webinars/">Webminars</a></li>
          <li><a href="https://labs.nexmo.com/">Labs</a></li>
        </ul>
      </div>
      <div class="col-md-4">
        <ul class="nav">
          <li><a href="https://www.nexmo.com/customers/">Trust Nexmo</a></li>
          <li><a href="https://www.nexmo.com/customers/#case">Case Studies</a></li>
        </ul>
      </div>
      <div class="col-md-4">
        <ul class="nav">
          <li><a href="https://www.nexmo.com/company/us/">About Nexmo</a></li>
          <li><a href="https://www.nexmo.com/company/press/">Press</a></li>
          <li><a href="https://www.nexmo.com/events/">Events</a></li>
          <li><a href="https://www.nexmo.com/company/careers/">Careers</a></li>
        </ul>
      </div>
    </div>
  </div>
  <div class="container">
    <div class="row social-privacy">
      <div class="col-md-6">
        <ul class="nav social">
          <li><a href="http://www.facebook.com/Nexmo"><i class="fa fa-facebook-square"></i> <span>Facebook</span></a></li>
          <li><a href="http://twitter.com/nexmo"><i class="fa fa-twitter-square"></i> <span>Twitter</span></a></li>
          <li><a href="https://www.linkedin.com/company/nexmo"><i class="fa fa-linkedin-square"></i> <span>LinkedIn</span></a></li>
        </ul>
      </div>
      <div class="col-md-6">
        <ul class="nav privacy">
          <li><a href="https://www.nexmo.com/terms-use/">Terms of Use</a></li>
          <li><a href="https://www.nexmo.com/privacy-policy/">Privacy Policy</a></li>
        </ul>
      </div>
    </div>
    <div class="row copywright">
      <div class="col-md-6">
        <p>© 2014 Nexmo - All rights reserved.</p>
      </div>
    </div>
  </div>
</footer>
<!-- ********************************* End Footer ******************************************* -->

</body>

<!-- JS -->
<script src="/Quickstarts/js/jquery-1.11.2.min.js"></script>
<script src="/Quickstarts/js/bootstrap.min.js"></script>
<script src="/Quickstarts/js/nexmo.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-20475086-4', 'auto');
  ga('send', 'pageview');

  var trackOutboundLink = function(url) {
     ga('send', 'event', 'outbound', 'click', url, {'hitCallback':
       function () {
       document.location = url;
       }
     });
  }

  $(function(){
    $('a.external-link').click(function(){
      trackOutboundLink($(this).attr('href'));
      return false;
    });
  });

</script>

<!--[if lt IE 9]>
  <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
</html>
